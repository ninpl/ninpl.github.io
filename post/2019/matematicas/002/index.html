<!DOCTYPE html>
<html lang="es-es">
<head>
	<title>Cuaternión Básicos&middot; Antonio Moon´s</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Moon Antonio">
	<meta name="description" content="un blog sobre mi, juegos, desarrollo y anime">
	<meta name="keywords" content="Moon,Antonio,Dev,Game">
	<meta name="generator" content="Hugo 0.50" />

	<!-- CSS -->
	<link rel="stylesheet" href="https://moonantonio.github.io/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://moonantonio.github.io/favicon.ico" type="image/x-icon">

	<!-- RSS -->
	

	<!-- Font Awesome -->
	<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <header class="site-header">
	<div class="branding">
		<a href="https://moonantonio.github.io/">
		<img class="avatar" src="https://moonantonio.github.io/img/avatar.png" alt="avatar"/>
		</a>
		<h1 class="site-title">
			<i class="fa fa-angle-right"></i>
			<a href="https://moonantonio.github.io/">Antonio Moon´s</a>
			<span class="logo-cursor "></span>
		</h1>
	</div>
	<nav class="site-nav">

		<ul>
			<li><a href="/about/">  </a></li>

			<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/devblog/" title="devBlog">
  		</i>&nbsp; devBlog</a> <i class="fa fa-gamepad" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/backdoor" title="BackDoor">
  		</i>&nbsp; BackDoor</a> <i class="fa fa-black-tie" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://github.com/MoonAntonio/rec.repos" title="Public">
  		</i>&nbsp; Publico</a> <i class="fa fa-code" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/portfolio/" title="About">
  		</i>&nbsp; About</a> <i class="fa fa-terminal" aria-hidden="true"></i>
  </a>
</li>

<li class="icon">
	<a href="https://moonantonio.github.io/" title="&#43;">
		</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>
	</a>
</li>

<li>
	<a href="https://moonantonio.github.io/" title="">
		<i class="fa fa-fw fa-home"></i>
	</a>
</li>

<li>
	<a href="https://moonantonio.github.io/index.xml" title="Subcribe">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>

<li>
	<a href="mailto:antoniomt.moon@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>



<li>
	<a href="https://bitbucket.org/MoonAntonio" title="Bitbucket">
		<i class="fa fa-fw fa-bitbucket"></i>
	</a>
</li>







<li>
	<a href="https://github.com/MoonAntonio" title="GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>

























<li>
	<a href="https://trello.com/antoniomoon" title="Trello">
		<i class="fa fa-fw fa-trello"></i>
	</a>
</li>

<li>
	<a href="https://gitlab.com/MoonAntonio" title="Gitlab">
		<i class="fa fa-fw fa-gitlab"></i>
	</a>
</li>

		</ul>
	</nav>
</header>

    <div class="content">
    <article class="feature-image">
		<header style="background-image: url('https://moonantonio.github.io/img/bg.png')">
			<h1 class="title">Cuaternión Básicos</h1>
		</header>

	<section class="post-content">
		

<p>Un cuaternión es un objeto matemático muy útil ideado por <strong>Sir William Rowan Hamilton</strong> como una extensión de números complejos . A menudo se usa para representar de forma compacta las orientaciones 3D con solo cuatro números de punto flotante, en lugar de usar una matriz de 3 por 3 que contiene nueve números de punto flotante, y tiene otras buenas propiedades de las que hablaré más adelante.</p>

<p>Como su nombre lo indica, un cuaternión se compone de cuatro componentes, uno en la <strong>parte real</strong> y los otros tres en la <strong>parte imaginaria</strong> . Un cuaternión generalmente se denota como:</p>

<p><center><img src="/img/codebackdoor/matematicas/q01.svg" alt="002" /></center></p>

<p>Donde en w está la parte real, (i, j, k)denota los tres ejes imaginarios y (x, y, z)denota los tres componentes imaginarios.</p>

<p>Por brevedad, usaré la notación a continuación para representar un cuaternión:</p>

<p><center><img src="/img/codebackdoor/matematicas/q02.svg" alt="003" /></center></p>

<h2 id="la-fórmula-fundamental-para-los-cuaterniones">La fórmula fundamental para los cuaterniones</h2>

<p>A continuación se muestra la fórmula fundamental que rige la <strong>aritmética de los cuaterniones</strong>:</p>

<p><center><img src="/img/codebackdoor/matematicas/q03.svg" alt="003" /></center></p>

<p>Con esta fórmula, podemos derivar las siguientes identidades:</p>

<p><center><img src="/img/codebackdoor/matematicas/q04.svg" alt="003" /></center></p>

<p>Por lo tanto, si expandimos el producto de dos cuaterniones, llegaremos a la <strong>fórmula de multiplicación de cuaterniones</strong> :</p>

<p><center><img src="/img/codebackdoor/matematicas/q05.svg" alt="003" /></center></p>

<p>Tenga en cuenta que la multiplicación de cuaterniones es <strong>asociativa</strong> :</p>

<p><center><img src="/img/codebackdoor/matematicas/q06.svg" alt="003" /></center></p>

<p>pero generalmente <strong>no conmutativo</strong> :</p>

<p><center><img src="/img/codebackdoor/matematicas/q07.svg" alt="003" /></center></p>

<p><strong>Sumar y restar</strong> dos cuaterniones es como sumar y restar dos vectores 4D:</p>

<p><center><img src="/img/codebackdoor/matematicas/q08.svg" alt="003" /></center></p>

<p><strong>Multiplicar</strong> un cuaternión por una escala es tan simple como multiplicar el componente individual por la escala:</p>

<p><center><img src="/img/codebackdoor/matematicas/q09.svg" alt="003" /></center></p>

<p><strong>El producto punto</strong> de dos cuaterniones es la suma de productos de componentes correspondientes:</p>

<p><center><img src="/img/codebackdoor/matematicas/q10.svg" alt="003" /></center></p>

<h2 id="unidades-cuaterniones">Unidades Cuaterniones</h2>

<p>La <strong>magnitud</strong> de un cuaternión se calcula de la siguiente manera:</p>

<p><center><img src="/img/codebackdoor/matematicas/q11.svg" alt="003" /></center></p>

<p>Una <strong>unidad quaternion</strong> tiene una magnitud de uno. El producto de dos unidades de cuaterniones es también una unidad de cuaterniones. Para normalizar un medio cuaternión dividen cada componente cuaternión por la magnitud del cuaternión.</p>

<p>Para mayor comodidad, los desarrolladores de juegos generalmente solo trabajan con cuaterniones de unidades. Después de muchas multiplicaciones, un cuaternión puede volverse no normalizado, por lo que a veces necesitamos volver a normalizar un cuaternión para asegurarnos de que se mantenga normalizado.</p>

<h2 id="cuaternion-inverso">Cuaternion Inverso</h2>

<p>Para un cuaternión q, su <strong>inverso multiplicativo</strong> (o inverso para abreviar) se denota q^{- 1} y satisface la siguiente propiedad:</p>

<p><center><img src="/img/codebackdoor/matematicas/q12.svg" alt="003" /></center></p>

<p>Si el cuaternión q es una unidad de cuaternión, entonces su inverso es solo su conjugado :</p>

<p><center><img src="/img/codebackdoor/matematicas/q13.svg" alt="003" /></center></p>

<p>Solo así, tan fácil como negar la parte imaginaria. Esta es una de las muchas razones por las que los desarrolladores de juegos prefieren trabajar con cuaterniones de unidades. De lo contrario, el proceso de inversión implicaría una división de punto flotante por la magnitud del cuaternión.</p>

<p>Además, la inversa de un producto cuaternión de dos cuaterniones sería igual a las inversas cuaterniones individuales multiplicadas en orden inverso:</p>

<p><center><img src="/img/codebackdoor/matematicas/q14.svg" alt="003" /></center></p>

<p>Prueba:</p>

<p><center><img src="/img/codebackdoor/matematicas/q15.svg" alt="003" /></center></p>

<h2 id="orientaciones-3d">Orientaciones 3D</h2>

<p>Cada orientación en 3D se puede representar utilizando la representación de ángulo de eje , y hay un mapeo entre un par de eje y ángulo y una unidad de cuaternión.</p>

<p>Para una orientación representada por un eje n y un ángulo y, la unidad cuaternión correspondiente es:</p>

<p><center><img src="/img/codebackdoor/matematicas/q16.svg" alt="003" /></center></p>

<p>Cuando tenemos un vector 3D r y nos gustaría rotarlo por la orientación representada por un cuaternión q, simplemente tenemos que realizar dos multiplicaciones de cuaterniones:</p>

<p><center><img src="/img/codebackdoor/matematicas/q17.svg" alt="003" /></center></p>

<p>donde en r está el vector rotado.</p>

<h2 id="concatenación-de-rotación">Concatenación de rotación</h2>

<p>La concatenación de dos rotaciones representado por dos cuaterniones, q1y q2(en este orden), es tan simple como la multiplicación de ellos en el orden inverso de concatenación:  q2 q1.</p>

<p>Entonces la fórmula a continuación:</p>

<p><center><img src="/img/codebackdoor/matematicas/q18.svg" alt="003" /></center></p>

<p>Daría el vector resultante a r, medida que el vector r gira primero q1 y luego q2, lo que se puede ver en los pasos de cálculo más detallados:</p>

<p><center><img src="/img/codebackdoor/matematicas/q19.svg" alt="003" /></center></p>

<h2 id="slerp">Slerp</h2>

<p>Slerp (interpolación lineal esférica) es una operación de cuaternión muy importante. Le permite interpolar entre dos orientaciones a lo largo de la &ldquo;ruta más corta&rdquo; si los dos cuaterniones utilizados son de la misma magnitud (otra buena razón para trabajar solo con unidades de cuaterniones). Esta es una tarea no trivial si representa orientaciones 3D utilizando matrices de rotación o ángulos de Euler . A continuación se muestra la fórmula para pasar de un cuaternión q1 a otro cuaternión q2 utilizando un parámetro de interpolación t:</p>

<p><center><img src="/img/codebackdoor/matematicas/q20.svg" alt="003" /></center>
<center><img src="/img/codebackdoor/matematicas/q21.svg" alt="003" /></center></p>

<hr />

<p>He cubierto las operaciones básicas para los cuaterniones, cómo representar una orientación 3D usando un cuaternión, cómo rotar un punto usando cuaterniones y una buena herramienta llamada &ldquo;slerp&rdquo; para interpolar entre dos orientaciones 3D a lo largo del &ldquo;camino más corto&rdquo;.</p>

<p>.\Moon</p>

<p><a href="https://ko-fi.com/B0B3NA0O"><img src="https://www.ko-fi.com/img/donate_sm.png" alt="ko-fi" /></a></p>


		
			<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "moonantonio" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		
	</section>
    </div>

    <footer class="site-footer">
	<p class="text">&copy; 2020 - Moon Antonio</p>
</footer>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-89564434-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>
